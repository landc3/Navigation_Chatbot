# 智能车辆电路图资料导航 Chatbot - 5天开发计划

## 项目概述
开发一个基于大语言模型的对话机器人，帮助用户通过自然语言对话和多轮选择题引导，快速定位所需的车辆电路图文档。

---

## 📅 第1天：项目搭建与数据准备

### 上午任务（4小时）
1. **技术栈选型与项目初始化**
   - [ ] 选择技术栈：
     - 后端：Python + FastAPI
     - 前端：React/Vue.j
     - LLM：OpenAI API / 通义千问 / kimi等
     - 向量数据库
   - [ ] 创建项目目录结构
   - [ ] 初始化Git仓库
   - [ ] 创建requirements.txt，安装基础依赖

2. **数据文件分析与预处理**
   - [ ] 读取并分析`资料清单.csv`（4235条记录）
   - [ ] 理解层级路径结构（`电路图->ECU电路图->工程机械->三一->德国仪表`）
   - [ ] 编写数据加载模块，将CSV转换为Python数据结构
   - [ ] 分析`keywords.txt`中的用户搜索模式

### 下午任务（4小时）
3. **基础项目架构搭建**
   - [ ] 创建后端API基础框架
     - 定义路由结构（/chat, /search等）
     - 设置CORS支持
   - [ ] 创建前端基础页面
     - 聊天界面布局
     - 消息显示区域
     - 输入框和发送按钮
   - [ ] 实现前后端基础通信（测试连接）

4. **数据模型设计**
   - [ ] 设计电路图数据模型（ID、层级路径、文件名称）
   - [ ] 实现层级路径解析工具函数
   - [ ] 创建数据索引结构（便于后续检索）

### 交付物
- ✅ 项目基础框架搭建完成
- ✅ 数据加载模块可用
- ✅ 前后端可以通信

---

## 📅 第2天：核心检索功能开发

### 上午任务（4小时）
1. **基础搜索功能实现**
   - [ ] 实现关键词匹配搜索
     - 在文件名称中搜索
     - 在层级路径中搜索
   - [ ] 实现模糊匹配（支持部分匹配）
   - [ ] 实现多关键词搜索（AND/OR逻辑）

2. **层级路径解析与利用**
   - [ ] 解析层级路径，提取各层级信息
   - [ ] 实现基于层级的筛选功能
   - [ ] 统计各层级选项（品牌、型号、类型等）

### 下午任务（4小时）
3. **检索结果排序与过滤**
   - [ ] 实现相关性评分算法
     - 完全匹配 > 部分匹配
     - 文件名称匹配 > 层级路径匹配
   - [ ] 实现结果去重
   - [ ] 实现结果限制（最多返回N条）

4. **测试与优化**
   - [ ] 使用`keywords.txt`中的示例进行测试
   - [ ] 优化搜索算法性能
   - [ ] 记录测试结果和问题

### 交付物
- ✅ 基础搜索功能可用
- ✅ 能够从CSV中检索相关电路图
- ✅ 检索结果可以排序和过滤

---

## 📅 第3天：意图理解与智能检索

### 上午任务（4小时）
1. **大语言模型集成**
   - [ ] 选择并配置LLM API（OpenAI/通义千问/kimi等）
   - [ ] 实现LLM调用封装函数
   - [ ] 设计意图理解的Prompt模板
   - [ ] 测试LLM调用是否正常

2. **意图理解功能开发**
   - [ ] 实现用户意图解析
     - 提取品牌（三一、徐工、东风等）
     - 提取型号（天龙KL、JH6等）
     - 提取类型（仪表图、ECU电路图等）
   - [ ] 实现近义词识别（如"仪表图" = "仪表电路图"）
   - [ ] 处理模糊表达（如"天龙" = "东风天龙"）

### 下午任务（4小时）
3. **智能检索优化**
   - [ ] 结合意图理解结果优化搜索
   - [ ] 实现语义搜索（如果使用向量数据库）
   - [ ] 改进相关性评分算法
   - [ ] 处理无结果情况

4. **多轮对话基础框架**
   - [ ] 设计对话状态管理
   - [ ] 实现对话历史记录
   - [ ] 设计问题生成逻辑框架

### 交付物
- ✅ LLM集成完成
- ✅ 能够理解用户自然语言意图
- ✅ 智能检索功能优化完成

---

## 📅 第4天：多轮对话引导功能

### 上午任务（4小时）
1. **选择题生成逻辑**
   - [ ] 实现选项提取算法
     - 当结果>5个时，分析层级路径
     - 提取可用的筛选维度（品牌、型号、类型等）
   - [ ] 实现选项去重和排序
   - [ ] 限制选项数量（3-5个）

2. **问题生成策略**
   - [ ] 设计问题生成规则
     - 优先按层级顺序提问（品牌 -> 型号 -> 类型）
     - 根据当前结果动态生成问题
   - [ ] 实现问题文本生成
   - [ ] 格式化选择题输出（A/B/C/D格式）

### 下午任务（4小时）
3. **对话流程控制**
   - [ ] 实现对话状态机
     - 初始搜索 -> 选择题 -> 继续筛选 -> 返回结果
   - [ ] 处理用户选择（A/B/C/D或直接文本）
   - [ ] 实现结果收敛逻辑（当结果≤5个时返回）
   - [ ] 处理边界情况（无结果、用户重新表达需求）

4. **交互优化**
   - [ ] 实现友好的错误提示
   - [ ] 支持用户返回上一步
   - [ ] 优化问题表述，使其更自然

### 交付物
- ✅ 多轮对话功能完整实现
- ✅ 能够通过选择题引导用户
- ✅ 对话流程顺畅

---

## 📅 第5天：界面优化与部署

### 上午任务（4小时）
1. **前端界面完善**
   - [ ] 优化聊天界面UI
     - 美化消息气泡样式
     - 优化选择题显示（可点击的按钮）
     - 添加加载动画
   - [ ] 实现对话历史滚动
   - [ ] 优化移动端适配
   - [ ] 添加必要的交互反馈

2. **功能测试与Bug修复**
   - [ ] 使用`keywords.txt`中的示例进行端到端测试
   - [ ] 测试各种边界情况
   - [ ] 修复发现的Bug
   - [ ] 性能优化（响应速度）

### 下午任务（4小时）
3. **部署准备**
   - [ ] 配置生产环境
   - [ ] 准备部署脚本
   - [ ] 配置环境变量（API密钥等）
   - [ ] 测试本地部署

4. **公网部署**
   - [ ] 选择部署平台（推荐：Vercel/Netlify前端 + Railway/Render后端，或使用Docker）
   - [ ] 部署后端服务
   - [ ] 部署前端应用
   - [ ] 配置域名和HTTPS（如需要）
   - [ ] 进行线上测试

5. **文档与交付**
   - [ ] 编写README.md（项目说明、安装步骤、使用说明）
   - [ ] 记录API文档
   - [ ] 准备演示视频或截图

### 交付物
- ✅ 完整的Web应用
- ✅ 部署到公网，可访问
- ✅ 项目文档完整

---

## 📋 每日工作检查清单

### 第1天检查点
- [ ] 项目可以运行
- [ ] 能够加载CSV数据
- [ ] 前后端可以通信

### 第2天检查点
- [ ] 能够搜索电路图
- [ ] 搜索结果合理
- [ ] 测试用例通过

### 第3天检查点
- [ ] LLM调用正常
- [ ] 能够理解用户意图
- [ ] 检索结果更精准

### 第4天检查点
- [ ] 能够进行多轮对话
- [ ] 选择题生成正确
- [ ] 对话流程顺畅

### 第5天检查点
- [ ] 界面美观易用
- [ ] 部署成功
- [ ] 可以正常访问

---

## 🛠️ 推荐技术栈

### 后端
- **Python 3.9+**
- **FastAPI**（轻量、快速、自动生成API文档）
- **pandas**（处理CSV数据）
- **openai** 或其他LLM SDK

### 前端
- **React + Vite**（或Vue.js）
- **Tailwind CSS**（快速样式）
- **Axios**（HTTP请求）

### 部署
- **前端**：Vercel / Netlify
- **后端**：Railway / Render / 阿里云 / 腾讯云
- **或使用Docker**：Docker Compose一键部署

### LLM选择
- **OpenAI GPT-3.5/4**（需要API密钥）
- **通义千问**（阿里云）
- **文心一言**（百度）
- **本地模型**（如Ollama + Llama2）

---

## ⚠️ 风险提示与应对

1. **LLM API调用限制**
   - 风险：API调用次数或费用限制
   - 应对：准备备用LLM方案，或使用本地模型

2. **检索性能问题**
   - 风险：4235条数据检索可能较慢
   - 应对：使用索引、缓存、或向量数据库优化

3. **部署问题**
   - 风险：公网部署可能遇到网络或配置问题
   - 应对：提前准备部署方案，预留调试时间

4. **时间紧张**
   - 风险：5天时间可能不够
   - 应对：优先实现核心功能，界面可以简化

---

## 📝 开发建议

1. **第一天就要确定技术栈**，避免中途更换
2. **先实现MVP（最小可行产品）**，再逐步优化
3. **每天结束时提交代码**，避免丢失
4. **多使用现有库和工具**，不要重复造轮子
5. **保持代码简洁**，便于后续维护和调试

---

## 🎯 成功标准

- ✅ 能够理解用户的自然语言查询
- ✅ 能够从4235条记录中检索相关电路图
- ✅ 当结果>5个时，能够通过选择题引导用户
- ✅ 最终返回≤5个精确结果
- ✅ Web界面美观易用
- ✅ 部署到公网可访问

---

**祝开发顺利！** 🚀

