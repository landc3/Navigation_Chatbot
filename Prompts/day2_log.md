# 第2天开发日志

## 📅 日期
第2天：核心检索功能开发

---

## ✅ 今日进展

完成核心检索能力：`SearchService` 支持 `jieba` 分词、多关键词 AND/OR（默认 AND）、停用词过滤、完全/部分匹配、相关性评分排序、去重与结果限制（默认 5 条）。
完善层级能力：`HierarchyUtil` 提取品牌/型号/类型/类别并支持组合筛选；支持选项统计输出用于后续选择题；完成 `/api/chat` 接入与测试脚本验证。

---

## 🐛 遇到的问题

AND 逻辑偏严格：测试中 AND 平均 1.5 条、无结果率 70%（7/10）；OR 平均 5.0 条、无结果率 0%，需要无结果时自动降级 OR。
分词风险：`jieba` 可能拆分专业词，后续考虑引入自定义词库/行业词典。

---

## 📋 明日计划

- 接入通义千问做意图解析，提取结构化条件驱动检索/筛选。
- 做多轮对话状态与选择题生成（复用选项统计）。
- 优化检索：AND 无结果自动降级 OR；补近义词/模糊表达。

---

## 📊 当前状态

- 核心搜索服务 ✅（`backend/app/services/search_service.py`）
- 层级工具与筛选 ✅（`backend/app/utils/hierarchy_util.py`）
- 相关性评分/排序/去重/限制 ✅
- 测试脚本 ✅（`backend/test_search_service.py`）
- `/api/chat` 接口改造 ✅（已支持 AND/OR 与 max_results）

---

## 🎯 总结

核心检索与层级筛选能力落地并完成 API 接入与测试，为第3天意图理解与多轮对话做准备。

---

**生成时间**：第2天开发完成后


